<!DOCTYPE html>
<!-- MOBILE-FIRST ¬∑ DUAL.INFODOSE ¬∑ HOME DO DIA -->
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Dual.Infodose ¬∑ Home do Dia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      /* Temas din√¢micos (valores ser√£o sobrescritos via JS) */
      --bg-main: radial-gradient(circle at top, #141429 0%, #050715 45%, #020309 100%);
      --bg-overlay: radial-gradient(circle at 75% 15%, #ffb45b 0%, #ff8d36 22%, transparent 65%);
      --accent-main: #ff8d36;
      --accent-warm: #ffb45b;
      --accent-cold: #00f6ff;

      --card-bg: rgba(8, 10, 25, 0.96);
      --card-soft: rgba(13, 17, 40, 0.96);
      --border-soft: rgba(145, 166, 255, 0.45);
      --text-main: #fdfdff;
      --text-soft: #c6c9ff;
      --text-muted: #7b81a8;

      --radius-xl: 28px;
      --radius-lg: 20px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.78);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        Roboto, "Segoe UI", sans-serif;
      color: var(--text-main);
      background: var(--bg-main);
      display: flex;
      justify-content: center;
      align-items: stretch;
      position: relative;
      overflow: hidden;
    }

    /* Passagem de tempo */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: var(--bg-overlay);
      opacity: 0;
      pointer-events: none;
      animation: dawnFade 1.6s ease-out 0.12s forwards;
    }

    @keyframes dawnFade {
      0%   { opacity: 0; filter: blur(14px); }
      40%  { opacity: 0.6; filter: blur(7px); }
      100% { opacity: 1; filter: blur(0); }
    }

    .shell {
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
      padding: 18px 16px 26px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
      z-index: 1;
      animation: fadeUp 0.75s ease-out 0.18s both;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(18px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .menu-button {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(153, 175, 255, 0.7);
      background: rgba(8, 10, 30, 0.96);
      color: var(--text-soft);
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.85);
    }

    .logo-title {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .logo-title span:nth-child(1) {
      font-size: 11px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .logo-title span:nth-child(2) {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-soft);
    }

    .mode-toggle {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 4px 10px 4px 6px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--text-soft);
      background:
        radial-gradient(circle at 0% 0%, rgba(0, 246, 255, 0.35), transparent 60%),
        rgba(4, 8, 28, 0.92);
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.75);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      cursor: pointer;
      transition: transform 0.2s ease, background 0.25s ease, border-color 0.25s ease;
    }

    .mode-toggle:hover { transform: translateY(-1px); }

    .mode-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-cold));
      box-shadow: 0 0 10px rgba(0, 246, 255, 0.85);
    }

    body.voice-on .mode-toggle {
      background:
        radial-gradient(circle at 0% 0%, rgba(255, 180, 91, 0.55), transparent 60%),
        rgba(10, 14, 46, 0.98);
      border-color: rgba(255, 180, 91, 0.9);
    }

    body.voice-on .mode-dot {
      background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-warm));
      box-shadow: 0 0 14px rgba(255, 180, 91, 0.98);
    }

    /* Sauda√ß√£o */
    .greeting-card {
      background: linear-gradient(135deg, rgba(22, 28, 70, 0.98), rgba(8, 12, 35, 0.98));
      border-radius: var(--radius-xl);
      padding: 18px 18px 22px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(153, 175, 255, 0.35);
      position: relative;
      overflow: hidden;
    }

    .greeting-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at 85% 10%, rgba(255, 149, 75, 0.28), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .greeting-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text-muted);
      font-size: 12px;
      position: relative;
      z-index: 1;
    }

    .greeting-window {
      font-weight: 500;
      letter-spacing: 0.08em;
    }

    .greeting-main {
      margin-top: 10px;
      position: relative;
      z-index: 1;
    }

    .greeting-title {
      font-size: 26px;
      letter-spacing: 0.02em;
      font-weight: 650;
    }

    .greeting-subtitle {
      margin-top: 4px;
      font-size: 14px;
      color: var(--accent-warm);
    }

    .voice-spectrum {
      margin: 14px 4px 0;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, #00f6ff, #8f7bff, #ffb45b, #ff5b7a);
      opacity: 0.4;
      position: relative;
      overflow: hidden;
    }

    .voice-spectrum::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg,
        rgba(255, 255, 255, 0.1),
        rgba(255, 255, 255, 0.9),
        rgba(255, 255, 255, 0.1));
      transform: translateX(-100%);
      animation: sweep 2.2s linear infinite;
      opacity: 0;
    }

    @keyframes sweep {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    body.voice-on .voice-spectrum { opacity: 1; }
    body.voice-on .voice-spectrum::before { opacity: 1; }

    .time-block {
      margin-top: 14px;
      padding: 10px 4px 0;
      position: relative;
      z-index: 1;
    }

    .time-labels {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .time-labels span:nth-child(2) {
      color: var(--accent-warm);
      font-weight: 500;
    }

    .time-slider-wrapper {
      position: relative;
      height: 20px;
      display: flex;
      align-items: center;
    }

    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-cold), var(--accent-warm));
      border-radius: 999px;
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-warm));
      box-shadow: 0 0 14px rgba(255, 180, 91, 0.9);
      border: 2px solid rgba(10, 14, 41, 0.9);
      cursor: pointer;
      margin-top: -8px;
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-warm));
      border: 2px solid rgba(10, 14, 41, 0.9);
      cursor: pointer;
      box-shadow: 0 0 14px rgba(255, 180, 91, 0.9);
    }

    /* Cards principais */
    .main-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 8px;
    }

    details.action-card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(102, 122, 200, 0.55);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.78);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      overflow: hidden;
      transition: border-color 0.16s ease, background 0.16s ease, box-shadow 0.16s ease;
    }

    details.action-card[open] {
      border-color: rgba(255, 180, 91, 0.9);
      background: radial-gradient(circle at 10% 0%, rgba(255, 180, 91, 0.15), rgba(5, 8, 28, 0.98));
      box-shadow: 0 16px 34px rgba(0, 0, 0, 0.92);
    }

    details.action-card > summary {
      list-style: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      font-size: 15px;
    }

    details.action-card > summary::-webkit-details-marker {
      display: none;
    }

    details.action-card span.label-strong {
      color: var(--accent-main);
    }

    .action-card-icon {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: #ffeedb;
      background: radial-gradient(circle at 30% 20%, #ffeedb, var(--accent-main));
      box-shadow: 0 0 12px rgba(255, 141, 54, 0.9);
    }

    .action-card-icon.chevron {
      font-size: 18px;
      background: radial-gradient(circle at 30% 20%, #e4e7ff, #8f7bff);
      box-shadow: 0 0 12px rgba(143, 123, 255, 0.9);
    }

    .details-body {
      padding: 0 16px 10px;
      border-top: 1px solid rgba(92, 115, 205, 0.7);
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 13px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }

    .chip {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(153, 175, 255, 0.5);
      background: rgba(12, 15, 38, 0.95);
      color: var(--text-soft);
      font-size: 12px;
      cursor: pointer;
      transition: background 0.16s ease, border-color 0.16s ease, transform 0.12s ease;
    }

    .chip.primary {
      border-color: rgba(255, 180, 91, 0.9);
      background: radial-gradient(circle at 20% 0%, rgba(255, 180, 91, 0.25), rgba(12, 15, 38, 0.98));
      color: #ffeedd;
    }

    .chip:active {
      transform: translateY(1px);
      background: rgba(18, 22, 55, 0.98);
    }

    .sheet-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .sheet-list li {
      padding: 8px 10px;
      border-radius: 10px;
      background: rgba(11, 14, 33, 0.98);
      border: 1px solid rgba(82, 104, 195, 0.7);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .sheet-tag {
      font-size: 11px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(255, 180, 91, 0.15);
      color: #ffd9a0;
      border: 1px solid rgba(255, 180, 91, 0.6);
    }

    .sheet-footnote {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* Campo de inten√ß√£o 1% */
    .intent-field {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(145, 166, 255, 0.6);
      background: rgba(9, 11, 31, 0.96);
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.85);
    }

    .intent-icon {
      font-size: 16px;
      color: var(--accent-warm);
    }

    .intent-input {
      flex: 1;
      min-width: 0;
      border: none;
      background: transparent;
      color: var(--text-soft);
      font-size: 12px;
      outline: none;
    }

    .intent-input::placeholder {
      color: rgba(145, 155, 210, 0.85);
    }

    .intent-btn {
      border-radius: 999px;
      border: 1px solid rgba(153, 175, 255, 0.7);
      background: radial-gradient(circle at 20% 0%, #ffffff, var(--accent-cold));
      color: #10141f;
      font-size: 14px;
      width: 26px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(0, 246, 255, 0.85);
    }

    .status-bar {
      margin-top: 10px;
      font-size: 12px;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .status-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffffff, #18d88a);
      box-shadow: 0 0 10px rgba(24, 216, 138, 0.9);
    }

    body.voice-on .status-dot {
      background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-warm));
      box-shadow: 0 0 10px rgba(255, 180, 91, 0.95);
    }

    /* Orb */
    .floating-orb {
      position: fixed;
      right: 18px;
      bottom: 18px;
      width: 58px;
      height: 58px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-main), #ff5b7a);
      box-shadow:
        0 0 22px rgba(255, 141, 54, 0.95),
        0 0 44px rgba(255, 91, 122, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #1b0b10;
      font-size: 24px;
      cursor: pointer;
      z-index: 30;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .floating-orb::after {
      content: "";
      position: absolute;
      inset: -16px;
      border-radius: 50%;
      border: 1px solid rgba(255, 180, 91, 0.28);
      box-shadow: 0 0 20px rgba(255, 180, 91, 0.45);
      opacity: 0.7;
    }

    .floating-orb:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow:
        0 0 26px rgba(255, 141, 54, 1),
        0 0 52px rgba(255, 91, 122, 0.9);
    }

    body.voice-on .floating-orb {
      background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-cold), #8f7bff);
      box-shadow:
        0 0 26px rgba(0, 246, 255, 0.98),
        0 0 52px rgba(143, 123, 255, 0.95);
    }

    body.voice-on .floating-orb span { transform: rotate(90deg); }

    .floating-orb span { transform: translateY(1px); }

    /* Mock de voz */
    .voice-mock {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 84px;
      max-width: 480px;
      margin: 0 auto;
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(7, 9, 24, 0.98);
      border-radius: 16px;
      border: 1px solid rgba(153, 175, 255, 0.4);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.9);
      transform: translateY(110%);
      opacity: 0;
      pointer-events: none;
      transition: transform 0.22s ease-out, opacity 0.22s ease-out;
      z-index: 35;
    }

    .voice-mock.visible {
      transform: translateY(0);
      opacity: 1;
      pointer-events: auto;
    }

    .voice-input {
      flex: 1;
      min-width: 0;
      border-radius: 999px;
      border: 1px solid rgba(88, 112, 210, 0.9);
      background: rgba(9, 11, 31, 0.96);
      color: var(--text-soft);
      padding: 6px 10px;
      font-size: 12px;
      outline: none;
    }

    .voice-input::placeholder {
      color: rgba(145, 155, 210, 0.8);
    }

    .voice-btn {
      border-radius: 999px;
      border: none;
      background: radial-gradient(circle at 20% 0%, #ffffff, var(--accent-warm));
      color: #201013;
      font-size: 12px;
      padding: 6px 10px;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(255, 180, 91, 0.95);
    }

    /* View de stacks */
    .view-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(5, 8, 24, 0.4), rgba(0, 0, 0, 0.92));
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.24s ease;
      z-index: 55;
    }

    .view-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .view-panel {
      position: absolute;
      left: 50%;
      bottom: 0;
      transform: translate(-50%, 110%);
      width: 100%;
      max-width: 480px;
      background: rgba(6, 9, 28, 0.98);
      border-radius: 22px 22px 0 0;
      box-shadow: 0 -20px 44px rgba(0, 0, 0, 0.98);
      border-top: 1px solid rgba(153, 175, 255, 0.5);
      transition: transform 0.26s ease-out;
      display: flex;
      flex-direction: column;
      max-height: 90vh;
    }

    .view-overlay.visible .view-panel {
      transform: translate(-50%, 0);
    }

    .view-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px 6px;
      border-bottom: 1px solid rgba(55, 72, 150, 0.7);
    }

    .view-back {
      border-radius: 999px;
      border: 1px solid rgba(153, 175, 255, 0.8);
      background: rgba(11, 15, 40, 0.98);
      color: var(--text-soft);
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
    }

    .view-titles {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .view-title {
      font-size: 15px;
      font-weight: 600;
    }

    .view-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .view-body {
      padding: 10px 14px 16px;
      overflow-y: auto;
      font-size: 13px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .view-note {
      font-size: 11px;
      color: var(--text-muted);
    }

    details.stack-card {
      background: rgba(9, 11, 31, 0.98);
      border-radius: 16px;
      border: 1px solid rgba(102, 122, 200, 0.75);
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.9);
      overflow: hidden;
    }

    details.stack-card[open] {
      border-color: rgba(255, 180, 91, 0.9);
      background: radial-gradient(circle at 5% 0%, rgba(255, 180, 91, 0.2), rgba(9, 11, 31, 0.98));
    }

    details.stack-card > summary {
      list-style: none;
      cursor: pointer;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 13px;
    }

    details.stack-card > summary::-webkit-details-marker {
      display: none;
    }

    .stack-label {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .stack-symbol {
      font-size: 16px;
    }

    .stack-body {
      padding: 0 12px 10px;
      border-top: 1px solid rgba(72, 92, 195, 0.7);
      font-size: 12px;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .stack-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 4px;
    }

    .stack-tag-pill {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(153, 175, 255, 0.7);
      background: rgba(10, 13, 35, 0.98);
      color: var(--text-soft);
    }

    /* Menu lateral + tema */
    .menu-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 0 0, rgba(11, 16, 40, 0.95), rgba(0, 0, 0, 0.9));
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.22s ease;
      z-index: 60;
    }

    .menu-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .menu-panel {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: min(80%, 320px);
      background: rgba(5, 8, 26, 0.98);
      border-right: 1px solid rgba(153, 175, 255, 0.5);
      box-shadow: 18px 0 40px rgba(0, 0, 0, 0.95);
      padding: 14px 14px 18px;
      transform: translateX(-100%);
      transition: transform 0.24s ease-out;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .menu-overlay.visible .menu-panel {
      transform: translateX(0);
    }

    .menu-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 4px;
    }

    .menu-title {
      font-size: 14px;
      font-weight: 600;
    }

    .menu-close {
      border-radius: 999px;
      border: 1px solid rgba(153, 175, 255, 0.7);
      background: rgba(11, 15, 40, 0.96);
      color: var(--text-soft);
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      cursor: pointer;
    }

    .menu-section-title {
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .menu-section {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }

    .menu-item {
      border-radius: 12px;
      border: 1px solid rgba(92, 115, 205, 0.8);
      background: rgba(9, 12, 33, 0.96);
      color: var(--text-soft);
      padding: 8px 10px;
      font-size: 13px;
      text-align: left;
      cursor: pointer;
    }

    .menu-item span {
      font-size: 11px;
      color: var(--text-muted);
      display: block;
      margin-top: 2px;
    }

    .theme-chip {
      font-size: 11px;
    }

    @media (min-width: 480px) {
      .shell { padding-top: 24px; }
    }
  </style>
</head>
<body>
  <main class="shell">
    <header>
      <div class="header-left">
        <button class="menu-button" id="menuButton" type="button" aria-label="Abrir menu">‚ò∞</button>
        <div class="logo-title">
          <span>Dual.Infodose</span>
          <span>Home do dia</span>
        </div>
      </div>
      <button class="mode-toggle" id="modeToggle" type="button">
        <div class="mode-dot"></div>
        <span id="modeLabel">Modo: Toque</span>
      </button>
    </header>

    <section class="greeting-card" aria-label="Sauda√ß√£o do dia">
      <div class="greeting-top">
        <span id="timeLeftLabel">06h</span>
        <span class="greeting-window" id="timeWindowLabel">06h ‚Äì 23h</span>
        <span id="timeRightLabel">23h</span>
      </div>

      <div class="greeting-main">
        <div class="greeting-title" id="greetingTitle">Bom dia, Dual</div>
        <div class="greeting-subtitle" id="greetingSubtitle">
          Sua dose de hoje j√° est√° organizada
        </div>
      </div>

      <div class="voice-spectrum" aria-hidden="true"></div>

      <div class="time-block">
        <div class="time-labels">
          <span>In√≠cio</span>
          <span id="timeCurrentLabel">08h</span>
          <span>Final</span>
        </div>
        <div class="time-slider-wrapper">
          <input id="timeSlider" type="range" min="6" max="23" step="1" value="8" />
        </div>
      </div>
    </section>

    <section class="main-actions" aria-label="A√ß√µes principais do dia">
      <!-- Ativa√ß√µes -->
      <details class="action-card" data-action="ativacoes">
        <summary>
          <span>Ativa√ß√µes de hoje</span>
          <div class="action-card-icon">‚ö°</div>
        </summary>
        <div class="details-body">
          <div class="chip-row">
            <button class="chip primary" type="button">Agora ¬∑ 25min</button>
            <button class="chip" type="button">Janela de foco</button>
            <button class="chip" type="button">Recarregar</button>
          </div>
          <ul class="sheet-list">
            <li>
              <span>Foco suave</span>
              <span class="sheet-tag">‚òÄ manh√£</span>
            </li>
            <li>
              <span>Pulso de execu√ß√£o</span>
              <span class="sheet-tag">‚öô tarde</span>
            </li>
            <li>
              <span>Desligar com consci√™ncia</span>
              <span class="sheet-tag">üåô noite</span>
            </li>
          </ul>
          <p class="sheet-footnote">
            Escolha 1 a√ß√£o m√≠nima. O resto o sistema ajuda a alinhar.
          </p>
        </div>
      </details>

      <!-- Organizar meu dia -->
      <details class="action-card" data-action="organizar">
        <summary>
          <span>Organizar meu dia</span>
          <div class="action-card-icon chevron">‚Ä∫</div>
        </summary>
        <div class="details-body">
          <div class="chip-row">
            <button class="chip primary" type="button">‚óê Manh√£</button>
            <button class="chip" type="button">‚òº Tarde</button>
            <button class="chip" type="button">‚ú¶ Noite</button>
          </div>
          <ul class="sheet-list">
            <li>
              <span>Vis√£o geral simples</span>
              <span class="sheet-tag">üëÅ vis√£o</span>
            </li>
            <li>
              <span>Reagrupar compromissos</span>
              <span class="sheet-tag">üîÅ auto</span>
            </li>
            <li>
              <span>Criar espa√ßo vazio</span>
              <span class="sheet-tag">‚≠ï respiro</span>
            </li>
          </ul>
          <p class="sheet-footnote">
            Dia em 3 blocos. Menos caos, mais ‚Äúeu sei o que estou fazendo‚Äù.
          </p>
        </div>
      </details>

      <!-- Arqu√©tipo do dia -->
      <details class="action-card" data-action="arquetipo">
        <summary>
          <span>Arqu√©tipo do dia</span>
          <div class="action-card-icon chevron">‚Ä∫</div>
        </summary>
        <div class="details-body">
          <div class="chip-row">
            <button class="chip primary" type="button">Resumo ‚ú¶</button>
            <button class="chip" type="button">Ouvir ‚óé</button>
            <button class="chip" type="button">Aplicar 1%</button>
          </div>
          <ul class="sheet-list">
            <li>
              <span>Arqu√©tipo ativo: Criador</span>
              <span class="sheet-tag">üé® hoje</span>
            </li>
            <li>
              <span>Micro-a√ß√£o simb√≥lica</span>
              <span class="sheet-tag">1%</span>
            </li>
          </ul>
          <p class="sheet-footnote">
            Cor do dia pronta. Voc√™ s√≥ escolhe onde pingar essa energia.
          </p>
        </div>
      </details>

      <!-- Documentos -->
      <details class="action-card" data-action="docs">
        <summary>
          <span>Meus <span class="label-strong">documentos</span></span>
          <div class="action-card-icon chevron">‚Ä∫</div>
        </summary>
        <div class="details-body">
          <div class="chip-row">
            <button class="chip primary" type="button">üìö Estudo</button>
            <button class="chip" type="button">üíº Trabalho</button>
            <button class="chip" type="button">üè° Pessoal</button>
          </div>
          <ul class="sheet-list">
            <li>
              <span>√öltimos abertos</span>
              <span class="sheet-tag">üïí recentes</span>
            </li>
            <li>
              <span>Pastas por tema</span>
              <span class="sheet-tag">üìÇ organizado</span>
            </li>
          </ul>
          <p class="sheet-footnote">
            Tudo agrupado. Mesmo quem √© leigo sente que est√° ‚Äúmanjando‚Äù.
          </p>
        </div>
      </details>
    </section>

    <!-- Campo inten√ß√£o -->
    <div class="intent-field">
      <span class="intent-icon">‚ú¶</span>
      <input
        id="intentInput"
        class="intent-input"
        type="text"
        placeholder="Inten√ß√£o 1% de hoje..."
      />
      <button id="intentSend" class="intent-btn" type="button">‚û§</button>
    </div>

    <div class="status-bar" id="statusBar">
      <div class="status-dot"></div>
      <span id="statusText">
        Abra um card, ajuste a linha do tempo ou escreva uma inten√ß√£o 1%.
      </span>
    </div>
  </main>

  <!-- Mock de voz -->
  <div class="voice-mock" id="voiceMock">
    <input
      id="voiceInput"
      class="voice-input"
      type="text"
      placeholder="Ex.: 'ativar o dia', 'organizar meu dia', 'arqu√©tipo do dia', 'abrir meus documentos'..."
    />
    <button class="voice-btn" id="voiceSend" type="button">OK</button>
  </div>

  <button class="floating-orb" id="orbButton" type="button" aria-label="Alternar modo voz">
    <span>‚óé</span>
  </button>

  <!-- View Stacks -->
  <div class="view-overlay" id="viewOverlay">
    <section class="view-panel" id="viewPanel">
      <header class="view-header">
        <button class="view-back" id="viewBack" type="button" aria-label="Voltar">‚Äπ</button>
        <div class="view-titles">
          <div class="view-title" id="viewTitle">Stacks do Dual.Infodose</div>
          <div class="view-subtitle" id="viewSubtitle">
            UNO ¬∑ Dual ¬∑ Trindade em blocos visuais.
          </div>
        </div>
      </header>
      <div class="view-body" id="viewBody"></div>
    </section>
  </div>

  <!-- Menu lateral / tema -->
  <div class="menu-overlay" id="menuOverlay">
    <aside class="menu-panel">
      <div class="menu-top">
        <span class="menu-title">Dual.Infodose</span>
        <button class="menu-close" id="menuClose" type="button" aria-label="Fechar menu">√ó</button>
      </div>

      <div class="menu-section">
        <span class="menu-section-title">Navega√ß√£o</span>
        <button class="menu-item" data-view="home">
          Home
          <span>Voltar para a vis√£o principal.</span>
        </button>
        <button class="menu-item" data-view="stacks">
          Stacks & pain√©is
          <span>Ver blocos internos UNO ¬∑ Dual ¬∑ Trindade.</span>
        </button>
      </div>

      <div class="menu-section">
        <span class="menu-section-title">Tema</span>
        <div class="chip-row">
          <button class="chip theme-chip primary" data-theme="auto" type="button">Auto (hora)</button>
          <button class="chip theme-chip" data-theme="dawn" type="button">Amanhecer</button>
          <button class="chip theme-chip" data-theme="day" type="button">Dia Claro</button>
          <button class="chip theme-chip" data-theme="night" type="button">Noite Nebula</button>
        </div>
      </div>

      <div class="menu-section">
        <span class="menu-section-title">Modo</span>
        <p style="font-size:12px;color:var(--text-soft);margin:0;">
          Use o bot√£o no topo ou o orb para alternar entre <strong>Toque</strong> e <strong>Voz</strong>.
        </p>
      </div>
    </aside>
  </div>

  <script>
    (function () {
      const slider = document.getElementById("timeSlider");
      const timeCurrentLabel = document.getElementById("timeCurrentLabel");
      const greetingTitle = document.getElementById("greetingTitle");
      const greetingSubtitle = document.getElementById("greetingSubtitle");
      const statusText = document.getElementById("statusText");
      const modeToggle = document.getElementById("modeToggle");
      const modeLabel = document.getElementById("modeLabel");
      const orbButton = document.getElementById("orbButton");
      const actionCards = document.querySelectorAll("details.action-card");

      const voiceMock = document.getElementById("voiceMock");
      const voiceInput = document.getElementById("voiceInput");
      const voiceSend = document.getElementById("voiceSend");

      const menuButton = document.getElementById("menuButton");
      const menuOverlay = document.getElementById("menuOverlay");
      const menuClose = document.getElementById("menuClose");
      const menuItems = document.querySelectorAll(".menu-item");
      const themeChips = document.querySelectorAll(".theme-chip");

      const viewOverlay = document.getElementById("viewOverlay");
      const viewTitle = document.getElementById("viewTitle");
      const viewSubtitle = document.getElementById("viewSubtitle");
      const viewBody = document.getElementById("viewBody");
      const viewBack = document.getElementById("viewBack");

      const intentInput = document.getElementById("intentInput");
      const intentSend = document.getElementById("intentSend");

      const rootStyle = document.documentElement.style;

      /* TEMAS DIN√ÇMICOS */
      const themes = {
        night: {
          bgMain: "radial-gradient(circle at top, #050716 0%, #020309 45%, #00010a 100%)",
          overlay: "radial-gradient(circle at 80% 10%, rgba(90, 140, 255, 0.35), transparent 60%)",
          accentMain: "#ff8d36",
          accentWarm: "#ffb45b",
          accentCold: "#00f6ff"
        },
        dawn: {
          bgMain: "radial-gradient(circle at top, #261640 0%, #050715 45%, #020309 100%)",
          overlay: "radial-gradient(circle at 75% 15%, #ffb45b 0%, #ff8d36 22%, transparent 65%)",
          accentMain: "#ff8d36",
          accentWarm: "#ffb45b",
          accentCold: "#00f6ff"
        },
        day: {
          bgMain: "radial-gradient(circle at top, #2a3c63 0%, #071220 45%, #020309 100%)",
          overlay: "radial-gradient(circle at 20% 0%, rgba(120, 210, 255, 0.35), transparent 60%)",
          accentMain: "#3fd4ff",
          accentWarm: "#ffd27a",
          accentCold: "#00f6ff"
        }
      };

      function applyTheme(themeKey) {
        const t = themes[themeKey];
        if (!t) return;
        rootStyle.setProperty("--bg-main", t.bgMain);
        rootStyle.setProperty("--bg-overlay", t.overlay);
        rootStyle.setProperty("--accent-main", t.accentMain);
        rootStyle.setProperty("--accent-warm", t.accentWarm);
        rootStyle.setProperty("--accent-cold", t.accentCold);
      }

      function getThemeByHour(h) {
        if (h < 6 || h >= 21) return "night";
        if (h < 12) return "dawn";
        if (h < 18) return "day";
        return "dawn";
      }

      let themeMode = "auto";
      let lastHour = new Date().getHours();
      let isUserAdjustingSlider = false;
      let sliderAdjustTimeout = null;

      function updateThemeByTime(h) {
        const themeKey = getThemeByHour(h);
        applyTheme(themeKey);
      }

      /* HORA / SAUDA√á√ÉO */
      function padHour(h) {
        const n = parseInt(h, 10);
        return (n < 10 ? "0" : "") + n + "h";
      }

      function updateFromHour(hour) {
        const h = parseInt(hour, 10);
        timeCurrentLabel.textContent = padHour(h);

        let greeting;
        if (h < 12) greeting = "Bom dia, Dual";
        else if (h < 18) greeting = "Boa tarde, Dual";
        else greeting = "Boa noite, Dual";
        greetingTitle.textContent = greeting;
        greetingSubtitle.textContent = "Sua dose de hoje j√° est√° organizada";

        if (themeMode === "auto") {
          updateThemeByTime(h);
        }
      }

      slider.addEventListener("input", function () {
        isUserAdjustingSlider = true;
        if (sliderAdjustTimeout) clearTimeout(sliderAdjustTimeout);
        sliderAdjustTimeout = setTimeout(function () {
          isUserAdjustingSlider = false;
        }, 12000);
        updateFromHour(slider.value);
      });

      /* MODO VOZ */
      function setVoiceMode(isOn) {
        if (isOn) {
          document.body.classList.add("voice-on");
          modeLabel.textContent = "Modo: Voz";
          statusText.textContent =
            "Modo Voz ativo: fale/digite um comando ou abra um card.";
          voiceMock.classList.add("visible");
          voiceInput.focus();
        } else {
          document.body.classList.remove("voice-on");
          modeLabel.textContent = "Modo: Toque";
          statusText.textContent =
            "Modo Toque ativo: use os cards, escreva a inten√ß√£o ou ative o orb.";
          voiceMock.classList.remove("visible");
          voiceInput.value = "";
        }
      }

      modeToggle.addEventListener("click", function () {
        const willTurnOn = !document.body.classList.contains("voice-on");
        setVoiceMode(willTurnOn);
      });

      orbButton.addEventListener("click", function () {
        const willTurnOn = !document.body.classList.contains("voice-on");
        setVoiceMode(willTurnOn);
      });

      /* STATUS AO ABRIR/CARD */
      actionCards.forEach(function (card) {
        const labelEl = card.querySelector("summary span");
        const labelText = labelEl ? labelEl.textContent.trim() : "este card";

        card.addEventListener("toggle", function () {
          if (card.open) {
            statusText.textContent =
              "Voc√™ abriu \"" + labelText + "\" ‚Äî tudo j√° organizado em blocos claros.";
          } else {
            statusText.textContent =
              "Cards fechados. Abra um card, escreva a inten√ß√£o ou use o Modo Voz.";
          }
        });
      });

      /* VOZ ‚Üí ABRIR CARD */
      function openCardByKey(key) {
        const target = document.querySelector('details.action-card[data-action="' + key + '"]');
        if (target) {
          target.open = true;
          target.scrollIntoView({ behavior: "smooth", block: "center" });
        }
      }

      function handleVoiceCommand(rawText) {
        const text = (rawText || "").trim();
        if (!text) return;
        const lower = text.toLowerCase();
        let target = null;

        if (lower.includes("ativ")) target = "ativacoes";
        else if (lower.includes("organ")) target = "organizar";
        else if (lower.includes("arqu")) target = "arquetipo";
        else if (lower.includes("doc") || lower.includes("arquivo")) target = "docs";

        if (target) {
          openCardByKey(target);
          statusText.textContent =
            "Comando reconhecido: \"" + text + "\" ‚Üí abrindo card correspondente.";
        } else {
          statusText.textContent =
            "N√£o entendi o comando. Exemplos: 'ativar o dia', 'organizar meu dia', 'arqu√©tipo do dia', 'abrir meus documentos'.";
        }
      }

      voiceSend.addEventListener("click", function () {
        handleVoiceCommand(voiceInput.value);
      });

      voiceInput.addEventListener("keydown", function (ev) {
        if (ev.key === "Enter") {
          ev.preventDefault();
          handleVoiceCommand(voiceInput.value);
        }
      });

      /* INTEN√á√ÉO 1% */
      function handleIntentSubmit() {
        const text = (intentInput.value || "").trim();
        if (!text) return;
        statusText.textContent =
          "Inten√ß√£o registrada: \"" + text + "\" ‚Äî 1% hoje, o resto o sistema acompanha.";
        intentInput.value = "";
      }

      intentSend.addEventListener("click", handleIntentSubmit);
      intentInput.addEventListener("keydown", function (ev) {
        if (ev.key === "Enter") {
          ev.preventDefault();
          handleIntentSubmit();
        }
      });

      /* MENU / TEMA / STACKS */
      function openMenu() {
        menuOverlay.classList.add("visible");
      }

      function closeMenu() {
        menuOverlay.classList.remove("visible");
      }

      menuButton.addEventListener("click", openMenu);
      menuClose.addEventListener("click", closeMenu);
      menuOverlay.addEventListener("click", function (ev) {
        if (ev.target === menuOverlay) closeMenu();
      });

      themeChips.forEach(function (chip) {
        chip.addEventListener("click", function () {
          const mode = chip.getAttribute("data-theme");
          themeMode = mode;

          themeChips.forEach(function (c) { c.classList.remove("primary"); });
          chip.classList.add("primary");

          if (mode === "auto") {
            updateThemeByTime(lastHour);
          } else {
            applyTheme(mode);
          }
        });
      });

      function openStacksView() {
        viewTitle.textContent = "Stacks do Dual.Infodose";
        viewSubtitle.textContent = "UNO ¬∑ Dual ¬∑ Trindade em sanfona simb√≥lica.";
        viewBody.innerHTML = `
          <details class="stack-card" open>
            <summary>
              <div class="stack-label">
                <span class="stack-symbol">‚óê</span>
                <span>Stack Home ¬∑ Dia</span>
              </div>
              <span>‚òÄ</span>
            </summary>
            <div class="stack-body">
              <span>Vis√£o geral do dia, linha do tempo e campo de inten√ß√£o.</span>
              <div class="stack-tags">
                <span class="stack-tag-pill">linha do tempo</span>
                <span class="stack-tag-pill">cards principais</span>
                <span class="stack-tag-pill">tema din√¢mico</span>
              </div>
            </div>
          </details>

          <details class="stack-card">
            <summary>
              <div class="stack-label">
                <span class="stack-symbol">‚òº</span>
                <span>Stack Foco</span>
              </div>
              <span>‚öô</span>
            </summary>
            <div class="stack-body">
              <span>Blocos de estudo/trabalho com timers, trilhas e 1% de entrega.</span>
              <div class="stack-tags">
                <span class="stack-tag-pill">foco</span>
                <span class="stack-tag-pill">timer</span>
                <span class="stack-tag-pill">trilhas</span>
              </div>
            </div>
          </details>

          <details class="stack-card">
            <summary>
              <div class="stack-label">
                <span class="stack-symbol">‚ú¶</span>
                <span>Stack Ritual</span>
              </div>
              <span>üîÆ</span>
            </summary>
            <div class="stack-body">
              <span>Arqu√©tipos, som, respira√ß√£o e micro-rituais Infodose.</span>
              <div class="stack-tags">
                <span class="stack-tag-pill">arqu√©tipo</span>
                <span class="stack-tag-pill">√°udio</span>
                <span class="stack-tag-pill">respirar</span>
              </div>
            </div>
          </details>

          <details class="stack-card">
            <summary>
              <div class="stack-label">
                <span class="stack-symbol">‚≠ï</span>
                <span>Stack Docs</span>
              </div>
              <span>üìÇ</span>
            </summary>
            <div class="stack-body">
              <span>Documentos, links e materiais agrupados por tema.</span>
              <div class="stack-tags">
                <span class="stack-tag-pill">estudo</span>
                <span class="stack-tag-pill">trabalho</span>
                <span class="stack-tag-pill">pessoal</span>
              </div>
            </div>
          </details>

          <p class="view-note">
            (Prot√≥tipo) ‚Äî cada stack aqui vira uma c√°psula real dentro do Hub / BlueCup.
          </p>
        `;
        viewOverlay.classList.add("visible");
        statusText.textContent = "Voc√™ abriu a vis√£o de Stacks & pain√©is em sanfona.";
      }

      function closeView() {
        viewOverlay.classList.remove("visible");
        statusText.textContent =
          "Rota fechada. Use os cards, a inten√ß√£o ou o Modo Voz para continuar.";
      }

      viewBack.addEventListener("click", closeView);
      viewOverlay.addEventListener("click", function (ev) {
        if (ev.target === viewOverlay) closeView();
      });

      menuItems.forEach(function (item) {
        item.addEventListener("click", function () {
          const view = item.getAttribute("data-view");
          if (view === "home") {
            closeView();
            statusText.textContent =
              "Home ativa. Abra um card, escreva a inten√ß√£o ou ajuste a linha do tempo.";
          } else if (view === "stacks") {
            openStacksView();
          }
          closeMenu();
        });
      });

      /* REL√ìGIO EM TEMPO REAL */
      function syncWithClock(first) {
        const now = new Date();
        lastHour = now.getHours();
        const clamped = Math.min(Math.max(lastHour, 6), 23);
        if (!isUserAdjustingSlider || first) {
          slider.value = clamped;
          updateFromHour(clamped);
        } else if (themeMode === "auto") {
          updateThemeByTime(lastHour);
        }
      }

      syncWithClock(true);
      setInterval(function () { syncWithClock(false); }, 60000);

      /* Inicializa√ß√£o */
      setVoiceMode(false);
      if (themeMode === "auto") {
        updateThemeByTime(lastHour);
      }
    })();
  </script>
</body>
</html>